<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/total.css">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
    <script>
        $(document).ready(function (){
            showgrade();
        })

        function showgrade(){
            $.ajax({
                type:'GET',
                url:'/grade1',
                data:{},
                success:function (response){
                    let rows=response['music']

                    for (let i = 0; i <rows.length ; i++) {
                        let comment=rows[i]['comment']
                        let title=rows[i]['title']
                        let star=rows[i]['star']
                        let image=rows[i]['image']

                        let star_image='â­'.repeat(star)

                        let temp_html=`<table>
                                            <tr class="trimg">
                                                <td colspan="2"><img src="${image}" width="300px" height="300px"></td>
                                            </tr>
                                            <tr class="trtitle">
                                                <td class="td1">ì œëª©</td><td class="td2">${title}</td>
                                            </tr>
                                            <tr class="trtitle">
                                                <td class="td1">í‰ì </td><td class="td2">${star_image}</td>
                                            </tr>
                                            <tr class="trcom">
                                                <td class="td1">ì½”ë©˜íŠ¸</td><td class="td2">${comment}</td>
                                            </tr>
                                        </table>`

                        $('#box1').append(temp_html)
                    }
                }
            })
        }

        function gradeclick(){
            let comment = $('#comment').val()
            let star = $('#sele').val()
            let url = $('#url').val()
            $.ajax({
                type:'POST',
                url:'/grade1',
                data:{url_give:url, star_give:star, comment_give:comment},
                success:function (response){
                    alert(response['msg'])
                    window.location.reload()
                }
            })
        }
    </script>
</head>
<body>
<nav class="nav">
    <h1>ğ„ UpTempo</h1>
    <div>
        <a href="/">ê²€ìƒ‰</a>
    </div>
    <div>
        <a href="/chart">ì‹¤ì‹œê°„ ì°¨íŠ¸</a>
    </div>
    <div>
        <a href="/grade">í‰ì </a>
    </div>
</nav>

<main>
    <div>1</div> <!--í•˜ì–€ ì¤„ì´ ìƒê²¨ ë„£ìœ¼ë©´ ì‚¬ë¼ì§-->
    <div class="shabox">
        <input type="text" class="urltext" placeholder="URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”" id="url">
        <div class="slectoption">
            <label class="optiontext" for="sele"> í‰ì </label>
            <select class="select" id="sele">
                <option selected>--ì„ íƒí•˜ê¸°--</option>
                <option value="1">â­</option>
                <option value="2">â­â­</option>
                <option value="3">â­â­â­</option>
                <option value="4">â­â­â­â­</option>
                <option value="5">â­â­â­â­â­</option>
            </select>
        </div>
        <textarea class="textar" placeholder="ì½”ë©˜íŠ¸" id="comment"></textarea>
        <div class="gradeBtn">
            <button onclick="gradeclick()">í‰ì  ë‚¨ê¸°ê¸°</button>
            <button><a href="https://www.genie.co.kr/" target="_blank">ì§€ë‹ˆ ë°”ë¡œê°€ê¸°</a></button>
        </div>

    </div>
    <div class="boxt1" id="box1">
    </div>
</main>

<footer>
    <h1> ğ„ UpTempo</h1>
    <div class="field">
        <fieldset>
            <legend>creators</legend>
            ğŸ‘¨â€ğŸ’»- ì´ì›ë¬¸ ğŸ‘¨â€ğŸ’» - ê¹€ë³‘ë¬´ ğŸ‘¨â€ğŸ’» - ê¹€ë™í˜„
        </fieldset>
    </div>
    <div class="field">
        <fieldset>
            <legend>copyright</legend>
            Copyright 2022.í•­í•´ 99 All right reserved
        </fieldset>
    </div>
</footer>

</body>
</html>